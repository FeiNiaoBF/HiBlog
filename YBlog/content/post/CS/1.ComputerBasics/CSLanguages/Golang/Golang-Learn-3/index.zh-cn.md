---
title: "Golang 语言笔记(3)"
date: 2024-03-10T16:04:09+08:00
draft: false
taps: ["Golang"]
categories: ["Golang", "CS", "Languages"]
author: ["Yeelight"]
showtoc: true
math: false
readingTime: true
---


## 值得一提的函数

### make 函数

在 Go 语言中，`make` 是一个内建函数，用于创建切片（slice）、映射（map）和通道（channel）这三种数据结构。`make` 函数的语法如下：

```go
make(T, size)
```

其中，`T` 代表要创建的数据结构的类型，`size` 代表要创建的数据结构的大小或容量（取决于具体的数据结构类型）。下面是 `make` 函数在不同数据结构上的使用示例：

1. 创建切片：

```go
slice := make([]int, 5) // 创建一个包含5个整数的切片
```

2. 创建映射：

```go
m := make(map[string]int) // 创建一个字符串到整数的映射
```

3. 创建通道：

```go
ch := make(chan int) // 创建一个整数类型的无缓冲通道
```

总之，`make` 函数在 Go 语言中用于初始化并分配内存给切片、映射和通道，是创建这些数据结构的常用方式。

### new 函数

在 Go 语言中，`new` 是一个内建函数，用于分配内存并返回指向已分配类型的指针。`new` 函数的语法如下：

```go
new(Type)
```

其中，`Type` 代表要分配内存的类型。`new` 函数返回一个指向该类型的零值的指针。下面是 `new` 函数的使用示例：

```go
p := new(int) // 分配一个整数类型的内存，并返回指向该整数的指针
```

在这个示例中，`p` 是一个指向整数类型的指针，它指向的整数的初始值为 0。`new` 函数通常用于分配内存给基本类型或结构体，并返回指向该类型的指针。

```go
// 分配一个整数数组的内存，并返回指向该数组的指针
arr := new([5]int)

// 分配一个字符串切片的内存，并返回指向该切片的指针
slice := new([]string)

// 分配一个映射的内存，并返回指向该映射的指针
m := new(map[string]int)

// 分配一个自定义类型的内存，并返回指向该类型的指针
type Person struct {
    Name string
    Age  int
}
p := new(Person)
```

> new 和 make 的区别：
> 在 Go 语言中，`new` 和 `make` 是两个不同的内建函数，它们用于分配内存和初始化不同类型的数据结构。
>
>`new` 函数用于分配内存，并返回指向该类型的零值的指针。它适用于所有类型，包括基本类型、结构体以及其他自定义类型。例如，`new(int)` 会分配一个整数类型的内存，并返回指向该整数的指针。
>
>`make` 函数则用于创建切片（slice）、映射（map）和通道（channel）这三种数据结构。它不返回指针，而是返回已初始化的数据结构。例如，`make([]int, 5)` 会创建一个包含 5 个整数的切片，并进行初始化。
>
>因此，`new` 用于任何类型的内存分配，而 `make` 专门用于切片、映射和通道的初始化。
